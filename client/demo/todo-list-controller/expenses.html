<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>      <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>       <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js" integrity="sha512-K1qjQ+NcF2TYO/eI3M6v8EiNYZfA95pQumfvcVrTHtwQVDG+aHRqLi/ETn2uB+1JqwYqVG3LIvdm9lj6imS/pQ==" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/angular.bootstrap/0.13.3/ui-bootstrap-tpls.min.js"> </script> 
        <!-- Include file with the controller -->
        <script src="/Curso Angular/angular-example/client/demo/todo-list-controller/todo-list.controller.js"></script> 
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" integrity="sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.5.0/js/bootstrap-datepicker.js"></script> 
		<script src="/Curso Angular/angular-example/client/demo/todo-list-controller/angular-animate.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.7.5/js/bootstrap-select.js"></script>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.7.5/css/bootstrap-select.css">
		<link href="/Curso Angular/angular-example/client/demo/todo-list-controller/xeditable.css" rel="stylesheet">
		<link href="/Curso Angular/angular-example/client/demo/todo-list-controller/bootstrap-datepicker.css" rel="stylesheet">
		<script src="/Curso Angular/angular-example/client/demo/todo-list-controller/xeditable.js"></script>		
		<style>
            .done {
                background-color: gray;
            }
        </style>
    </head>
    <body ng-app="todoListControllerDemo">
        <div class="container" ng-controller="EditableRowCtrl">
			<div class="jumbotron" style="margin-top:35px">
			   <div class="row">
					<h2>Expenses {{list.length}}</h2>
				</div>
				<div class="row">
					<div class="col-lg-12">
						<div class="col-lg-2" id="sandbox-container"><input type="text" id="inputDate" class="form-control" placeholder="Select the expensive's date by clicking..." ng-model="itemDate"></div>
						<select class="selectpicker col-lg-3" id="inputType" ng-model="itemType">
							<option value="1">Food</option>
							<option value="2">Transportation</option>
							<option value="3">Lodge</option>
							<option value="4">Financial</option>
							<option value="5">Sales</option>
							<option value="6">Other</option>
						</select>
						<div class="col-lg-3"><input id="inputDesc" type="text" class="form-control" placeholder="Type the expensive's description here..." ng-model="itemText"></div>
						<div class="col-lg-2"><input id="inputAmount" type="number" min="0" class="form-control col-lg-2" ng-model="itemAmount"></div>
						<input id="add-button" class="btn btn-default" type="button" value="Add" ng-click="add(itemDate, itemText, itemAmount, itemType)">
					</div>
					<div style="margin-top:30px" class="col-xs-12">
						<div class="row">
								<div class="panel panel-primary filterable">
									<div class="panel-heading">
										<h3 class="panel-title">Expenses</h3>
										<div class="pull-right">
											<button class="btn btn-default btn-xs btn-filter"><span class="glyphicon glyphicon-filter"></span> Filter</button>
										</div>
									</div>
									<!--<div ng-controller="EditableRowCtrl">-->
										<table class="table">
											<thead>
												<tr class="filters">
													<th><input type="text" class="form-control" placeholder="Description" disabled></th>
													<th><input type="text" class="form-control" placeholder="Date" disabled></th>
													<th><input type="text" class="form-control" placeholder="Type" disabled></th>
													<th><input type="text" class="form-control" placeholder="Amount" disabled></th>
												</tr>
											</thead>
											<tbody>
												<tr ng-repeat="item in list track by $index | filter:search" class="animate">
													<td>
														<span editable-text="item.text" e-name="text" e-form="rowform" e-required>
															{{ item.text || 'empty' }}
														</span>
													</td>
													<td>{{ item.date | date:'shortDate' }}</td>
													<td>
														<span editable-select="item.type" e-name="type" e-form="rowform" e-ng-options="t.value as t.text for t in types">
															{{ showTypes(item) }}
														</span>
													</td>
													<td>{{ item.amount | currency }}</td>
													
													<td style="white-space: nowrap">
														<form editable-form name="rowform" onbeforesave="save($data, item.id)" onaftersave="updateSubtotal($index, item)"  ng-show="rowform.$visible" class="form-buttons form-inline" shown="inserted == item">
														  <button type="submit" ng-disabled="rowform.$waiting" class="btn btn-primary" >
															save
														  </button>
														  <button type="button" ng-disabled="rowform.$waiting" ng-click="rowform.$cancel()" class="btn btn-default">
															cancel
														  </button>
														</form>
														<div class="buttons" ng-show="!rowform.$visible">
														  <button class="btn btn-primary" ng-click="rowform.$show()">edit</button>
														  <button class="btn btn-danger" ng-click="remove($index)">del</button>
														</div>  
													  </td>
												</tr>
											</tbody>
										</table>
									<!--</div>-->
								</div>
						</div>
					</div>
					<div style="margin-top:20px" class="col-xs-6 col-md-offset-3" ng-show="amount_total > 0">
						<div class="row">
								<div class="panel panel-primary filterable">
									<div class="panel-heading" style="background-color:red">
										<h3 class="panel-title">Subtotal of Expenses by Category</h3>
										<div class="pull-right">
											<button class="btn btn-default btn-xs btn-filter"><span class="glyphicon glyphicon-filter"></span> Filter</button>
										</div>
									</div>
									<table class="table">
										<thead>
											<tr class="filters">
												<th><input type="text" class="form-control" placeholder="Type" disabled></th>
												<th><input type="text" class="form-control" placeholder="Subtotal" disabled></th>
											</tr>
										</thead>
										<tbody>
											<tr>
												<td>Food</td>
												<td>{{amount_food_subtotal | currency}}</td>
											</tr>
											<tr>
												<td>Transportation</td>
												<td>{{amount_transport_subtotal | currency}}</td>
											</tr>
											<tr>
												<td>Lodge</td>
												<td>{{amount_lodge_subtotal | currency}}</td>
											</tr>
											<tr>
												<td>Financial</td>
												<td>{{amount_financial_subtotal | currency}}</td>
											</tr>
											<tr>
												<td>Sales</td>
												<td>{{amount_sales_subtotal | currency}}</td>
											</tr>
											<tr>
												<td>Others</td>
												<td>{{amount_others_subtotal | currency}}</td>
											</tr>
										</tbody>
									</table>
								</div>
						</div>
					</div>
					<div style="margin-top:20px" class="col-xs-6 col-md-offset-3" ng-show="amount_total > 0">
						<div class="row">
								<div class="panel panel-primary filterable">
									<div class="panel-heading" style="background-color:green">
										<h3 class="panel-title">Total of Expenses</h3>
									</div> 
									<div class="panel-body">
									  <h3>The grandtotal of the expenses is <strong>{{amount_total | currency}}</strong>.</h3>
									</div>
								</div>
						</div>
					</div>
				</div>
			</div>
        </div>
	
		<script>
			$('#sandbox-container input').datepicker({
				format: "dd/mm/yyyy",
				clearBtn: true,
				language: "es",
				daysOfWeekDisabled: "0,6",
				daysOfWeekHighlighted: "0,6",
				autoclose: true,
				todayHighlight: true
				});
			$('.selectpicker').selectpicker();
			$(document).ready(function(){
			$('.filterable .btn-filter').click(function(){
				var $panel = $(this).parents('.filterable'),
				$filters = $panel.find('.filters input'),
				$tbody = $panel.find('.table tbody');
				if ($filters.prop('disabled') == true) {
					$filters.prop('disabled', false);
					$filters.first().focus();
				} else {
					$filters.val('').prop('disabled', true);
					$tbody.find('.no-result').remove();
					$tbody.find('tr').show();
				}
			});

			$('.filterable .filters input').keyup(function(e){
				/* Ignore tab key */
				var code = e.keyCode || e.which;
				if (code == '9') return;
				/* Useful DOM data and selectors */
				var $input = $(this),
				inputContent = $input.val().toLowerCase(),
				$panel = $input.parents('.filterable'),
				column = $panel.find('.filters th').index($input.parents('th')),
				$table = $panel.find('.table'),
				$rows = $table.find('tbody tr');
				/* Dirtiest filter function ever ;) */
				var $filteredRows = $rows.filter(function(){
					var value = $(this).find('td').eq(column).text().toLowerCase();
					return value.indexOf(inputContent) === -1;
				});
				/* Clean previous no-result if exist */
				$table.find('tbody .no-result').remove();
				/* Show all rows, hide filtered ones (never do that outside of a demo ! xD) */
				$rows.show();
				$filteredRows.hide();
				/* Prepend no-result row if all rows are filtered */
				if ($filteredRows.length === $rows.length) {
					$table.find('tbody').prepend($('<tr class="no-result text-center"><td colspan="'+ $table.find('.filters th').length +'">No result found</td></tr>'));
				}
			});
		});
		</script>
		<style>
			.filterable {
				margin-top: 15px;
			}
			.filterable .panel-heading .pull-right {
				margin-top: -20px;
			}
			.filterable .filters input[disabled] {
				background-color: transparent;
				border: none;
				cursor: auto;
				box-shadow: none;
				padding: 0;
				height: auto;
			}
			.filterable .filters input[disabled]::-webkit-input-placeholder {
				color: #333;
			}
			.filterable .filters input[disabled]::-moz-placeholder {
				color: #333;
			}
			.filterable .filters input[disabled]:-ms-input-placeholder {
				color: #333;
			}
			.animate.ng-enter, .animate.ng-leave {
  transition: 500ms ease-in all;
  position: relative;
  display: block;
} 

.animate.ng-enter.ng-enter-active, .animate.ng-leave {
  left: 0;
}
.animate.ng-leave.ng-leave-active, .animate.ng-enter {
  left: 500px;
}
		</style>
    </body>

</html>
